#!/bin/bash

COMMIT_ID=$(git rev-parse ${1:-"HEAD"})
COMMIT_MSG="$(git log $COMMIT_ID~1..$COMMIT_ID --pretty=%B)"
ORIGIN="$(git config --get remote.origin.url)"
ORIGIN_PATH="${ORIGIN#*github.com\:}"
ORIGIN_PATH_SANS_EXT="${ORIGIN_PATH%.git}"
COMMIT_BRANCH="$(git rev-parse --abbrev-ref HEAD)"
COMMIT_URL="https://github.com/$ORIGIN_PATH_SANS_EXT/commit/$COMMIT_ID"

COMMIT_NOTES="$COMMIT_MSG\n\nBranch: $COMMIT_BRANCH\n$COMMIT_URL"

echo -e "$COMMIT_NOTES"

if [ -x "$(which pbcopy)" ]; then
	echo -e "$COMMIT_NOTES" | pbcopy
fi