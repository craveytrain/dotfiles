---
phase: 01-foundation-ghostty-module
plan: 03
type: execute
wave: 2
depends_on: ["01-02"]
files_modified:
  - playbooks/deploy.yml
  - modules/ghostty/config.yml
  - modules/ghostty/README.md
  - modules/ghostty/files/.config/ghostty/config
autonomous: true

must_haves:
  truths:
    - "Ghostty module exists with correct structure"
    - "Ghostty configuration can be deployed via stow"
    - "Ghostty added to deploy.yml install list"
  artifacts:
    - path: "playbooks/deploy.yml"
      provides: "Module deployment configuration"
      contains: "ghostty"
    - path: "modules/ghostty/config.yml"
      provides: "Module configuration for ansible-role-dotmodules"
      contains: "stow_dirs"
    - path: "modules/ghostty/files/.config/ghostty/config"
      provides: "Ghostty terminal configuration"
      min_lines: 10
    - path: "modules/ghostty/README.md"
      provides: "Module documentation"
      min_lines: 20
  key_links:
    - from: "playbooks/deploy.yml"
      to: "modules/ghostty/"
      via: "dotmodules.install list"
      pattern: "- ghostty"
    - from: "modules/ghostty/config.yml"
      to: "modules/ghostty/files/"
      via: "stow_dirs reference"
      pattern: "stow_dirs:.*ghostty"
---

<objective>
Create the Ghostty terminal configuration module.

Purpose: Establish module creation pattern with simplest implementation - a config-only module using stow_dirs.
Output: Complete Ghostty module ready for deployment.
</objective>

<execution_context>
@/Users/mcravey/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mcravey/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation-ghostty-module/01-RESEARCH.md
@.planning/phases/01-foundation-ghostty-module/01-02-SUMMARY.md
@modules/git/config.yml (pattern reference)
@playbooks/deploy.yml
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Ghostty module structure</name>
  <files>
modules/ghostty/config.yml
modules/ghostty/files/.config/ghostty/config
modules/ghostty/README.md
  </files>
  <action>
Create the Ghostty module with three files:

**1. modules/ghostty/config.yml:**
```yaml
---
# Ghostty terminal configuration module
# Provides Ghostty terminal emulator configuration

homebrew_casks:
  - ghostty

stow_dirs:
  - ghostty
```

**2. modules/ghostty/files/.config/ghostty/config:**
Copy the existing configuration from ~/.config/ghostty/config. The file contains Ghostty terminal settings including:
- Font configuration (MonoLisa Nerd Font, size 14)
- Theme settings (Shades of Purple)
- Window settings (padding, tabs titlebar style, etc.)

First create the directory structure:
```bash
mkdir -p modules/ghostty/files/.config/ghostty
```

Then copy the existing config:
```bash
cp ~/.config/ghostty/config modules/ghostty/files/.config/ghostty/config
```

**3. modules/ghostty/README.md:**
Create documentation following existing module patterns. Include:
- Module description (Ghostty terminal configuration)
- Core features (config sync, symlink deployment)
- Installation components (files deployed, optional Homebrew cask)
- Prerequisites (Ghostty installed)
- Deployment instructions
- Configuration editing instructions
- Link to Ghostty documentation (https://ghostty.org/docs/config)

Key points for README:
- Files are symlinked, so edits in modules/ are immediately reflected
- Changes should be committed and pushed to sync across machines
- The module optionally installs Ghostty via Homebrew cask
  </action>
  <verify>
Run: `ls -la modules/ghostty/` - should show config.yml, README.md, files/
Run: `ls -la modules/ghostty/files/.config/ghostty/` - should show config file
Run: `cat modules/ghostty/config.yml | grep stow_dirs` - should show stow_dirs configuration
  </verify>
  <done>Ghostty module exists with config.yml, README.md, and config file in files/</done>
</task>

<task type="auto">
  <name>Task 2: Add Ghostty to deploy.yml</name>
  <files>playbooks/deploy.yml</files>
  <action>
Add `- ghostty` to the dotmodules.install list in playbooks/deploy.yml.

Add ghostty at the end of the install list (after editor).

After edit, the install list should be:
```yaml
      install:
        - git
        - fonts
        - 1password
        - shell
        - fish
        - zsh
        - dev-tools
        - node
        - editor
        - ghostty
```

Do NOT modify any other parts of the file.
  </action>
  <verify>
Run: `grep "ghostty" playbooks/deploy.yml` - should show ghostty in install list
Run: `grep -A 15 "install:" playbooks/deploy.yml | grep ghostty` - confirms ghostty in install list
  </verify>
  <done>deploy.yml includes ghostty in the install list</done>
</task>

</tasks>

<verification>
After all tasks complete:
1. `ls modules/ghostty/` shows config.yml, README.md, files/
2. `cat modules/ghostty/config.yml` shows valid YAML with stow_dirs
3. `cat modules/ghostty/files/.config/ghostty/config` has ghostty configuration
4. `grep "ghostty" playbooks/deploy.yml` shows ghostty in install list
</verification>

<success_criteria>
- modules/ghostty/ exists with correct structure
- modules/ghostty/config.yml has stow_dirs configuration
- modules/ghostty/files/.config/ghostty/config contains Ghostty settings
- modules/ghostty/README.md documents the module
- playbooks/deploy.yml includes ghostty in install list
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-ghostty-module/01-03-SUMMARY.md`
</output>
